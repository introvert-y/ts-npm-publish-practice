# æ¢ç´¢ä¸€ä¸ªä½¿ç”¨ typescript çš„å½¢å¼å»å¼€å‘ npm åŒ…

## å®‰è£…ä¾èµ–

npm/cnpm install

## è®¾ç½®ä¸º npm å‘åŒ…æ—¶çš„ç›®å½•

package.json é‡Œçš„ files, è¿™æ ·å¯¹å¤–çš„åŒ…åªæœ‰/libã€package.json å’Œ README.md

## æ‰“åŒ…åçš„å†…å®¹ä¸ä¸Šä¼  github

é€šè¿‡.gitignore å¤„ç†
github åªå­˜å‚¨å¼€å‘æµç¨‹çš„ä¸œè¥¿ï¼Œæ‰“åŒ…åçš„ä¸œè¥¿ä¸å­˜ã€‚

eslint + prettier + husky + lint-staged + commitlint

### eslint æ£€æŸ¥ä»£ç é€»è¾‘

### prettier æ ¼å¼åŒ–ä»£ç æ ·å¼ä½¿å…¶æ›´ç¾è§‚

ä¸¤è€…ä¼šæœ‰ä¸€äº›é…ç½®ä¸Šçš„å†²çªï¼Œä½†æ˜¯æœ‰ç›¸å…³çš„åº“æ¥è§£å†³è¿™äº›ä¸ä¸€è‡´çš„è§„åˆ™ï¼Œå¦‚ eslint-config-prettierã€‚åªéœ€åœ¨.eslintrc ä¸­,extend ä¸­æ·»åŠ  "prettier" å°±å¯ä»¥è§£å†³ eslint å’Œ prettier çš„å†²çªã€‚[github ä¼ é€é—¨](https://github.com/prettier/eslint-config-prettier)

### husky

å½“æ‚¨æäº¤æˆ–æ¨é€æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ£€æŸ¥**æ‚¨çš„æäº¤æ¶ˆæ¯**ã€**è¿è¡Œæµ‹è¯•**ã€æ£€æŸ¥**ä»£ç **ç­‰ã€‚Husky æ”¯æŒ[æ‰€æœ‰ Git é’©å­](https://git-scm.com/docs/githooks)ã€‚</br>

- [github ä¼ é€é—¨](https://github.com/typicode/husky)</br>
- [å®˜æ–¹æ–‡æ¡£](https://typicode.github.io/husky/#/)

#### æ—§ç‰ˆ v4

```js
// .huskyrc.json (v4) æ—§ç‰ˆ
{
  "hooks": {
    "pre-commit": "npm test && npm run foo"
  }
}
```

#### æ–°ç‰ˆ v8

è¿™ä¸ªé¡¹ç›®åœ¨.husky é‡Œ</br>

1. pre-commit æ‰§è¡Œäº†ä»£ç é£æ ¼æ£€æŸ¥ npx lint-staged
2. commit-msg æ ¡éªŒ commit æäº¤ä¿¡æ¯çš„è§„èŒƒ

tips: è¿™ä¸ª.husky æ–‡ä»¶å¤¹è¦ä¸Šä¼ åˆ°ä»£ç ä»“åº“ã€‚é»˜è®¤çš„.gitignore ä¼šå¿½ç•¥æ‰è¿™ä¸ªæ–‡ä»¶å¤¹

### lint-staged

å¯¹æš‚å­˜çš„ git æ–‡ä»¶è¿è¡Œ linterï¼Œä¸è¦è®© ğŸ’© æºœè¿›ä½ çš„ä»£ç åº“! [github ä¼ é€é—¨](https://github.com/okonet/lint-staged)

- ä»é‚£`v10.0.0`ä»¥åï¼Œå¯¹åŸå§‹æš‚å­˜æ–‡ä»¶çš„ä»»ä½•æ–°ä¿®æ”¹éƒ½å°†è‡ªåŠ¨æ·»åŠ åˆ°æäº¤ä¸­ã€‚å¦‚æœæ‚¨çš„ä»»åŠ¡ä¹‹å‰åŒ…å«ä¸€ä¸ª`git add`æ­¥éª¤ï¼Œè¯·åˆ é™¤å®ƒã€‚è‡ªåŠ¨è¡Œä¸ºç¡®ä¿äº†è¾ƒå°‘çš„ç«äº‰æ¡ä»¶ï¼Œå› ä¸ºå°è¯•åŒæ—¶è¿è¡Œå¤šä¸ª git æ“ä½œé€šå¸¸ä¼šå¯¼è‡´é”™è¯¯ã€‚

### commitlint

commit ä¿¡æ¯æ ¡éªŒ

### commitizen

é€šè¿‡å‘½ä»¤è¡Œé‡Œæ·»åŠ å¼•å¯¼æµç¨‹ï¼Œè¾…åŠ© commit ä¿¡æ¯è§„èŒƒæäº¤ä¿¡æ¯

### standard-version

ç‰ˆæœ¬å‘å¸ƒæ ‡å‡†è‡ªåŠ¨åŒ–</br>
standard-version æ˜¯ä¸€æ¬¾éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆ semverï¼‰å’Œ commit message æ ‡å‡†è§„èŒƒ çš„ç‰ˆæœ¬å’Œ changlog è‡ªåŠ¨åŒ–å·¥å…· </br>
npm ä»“åº“çš„ä¸»é¡µä¸Šè¯´æ˜ï¼Œ**å·²å¼ƒç”¨**ã€‚ä½†æ˜¯è¿˜æ˜¯èƒ½ç”¨

## æ€»ç»“

è¿™ä¸€å¥—ç»„åˆæ‹³ä¸‹æ¥ï¼ŒåŸºæœ¬èƒ½æ»¡è¶³æ—¥å¸¸çš„å¼€å‘ã€‚

1. npm run build TS è½¬ JS
2. npm test æ‰§è¡Œå•å…ƒæµ‹è¯•
3. git add . && npm run commit
4. git push
5. npm run changelog (å¯é€‰ï¼‰

## æ€è€ƒ

1. è¿™ä¸Šé¢è¿™ä¸€å¤§å †å¦‚æœæ¯æ¬¡éƒ½é…æ˜¯çœŸçš„å¿ƒç´¯ï¼Œå¦‚æœèƒ½ç»“åˆå…¶ä¸­å‡ é¡¹æ¥åšä¸ªåŒ…æˆ–æ’ä»¶å°±å¾ˆæ–¹ä¾¿äº†ã€‚
2. ç»“åˆå‘ npm åŒ…åœºæ™¯è¿˜æ˜¯ä¸å¤Ÿæ–¹ä¾¿ï¼Œå¯ä»¥è€ƒè™‘åšä¸ªå·¥å…·ï¼Œæ¯æ¬¡æ–°å¼€åˆ†æ”¯ï¼Œèƒ½è‡ªåŠ¨æ–°å¢ç‰ˆæœ¬å·ã€‚

> å‚è€ƒæ–‡ç« </br> > https://juejin.cn/post/7038143752036155428 </br> > https://juejin.cn/post/7053730154710827045#heading-16
